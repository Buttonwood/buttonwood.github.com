<!DOCTYPE HTML>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>Buttonwood</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
    <meta name="author" content="Buttonwood">
  
  
  <meta name="description" content="Buttonwood | Data Mining | python | perl | Bioinformatics">
<meta property="og:type" content="website">
<meta property="og:title" content="Buttonwood">
<meta property="og:url" content="http://buttonwood.github.io/index.html">
<meta property="og:site_name" content="Buttonwood">
<meta property="og:description" content="Buttonwood | Data Mining | python | perl | Bioinformatics">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Buttonwood">
<meta name="twitter:description" content="Buttonwood | Data Mining | python | perl | Bioinformatics">
  
    <link rel="alternate" href="/atom.xml" title="Buttonwood" type="application/atom+xml">
  
  
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  
</head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="wrapper">
    <header id="header">
  <div class="title">
    <h1><a href="/">Buttonwood</a></h1>
    <p><a href="/">Being A Coding Poet. Less Talk, and More Move!</a></p>
  </div>
  <nav class="nav">
    <ul>
      
        <li><a href="/about/">About</a></li>
      
        <li><a href="/archives/">Archives</a></li>
      
        <li><a href="/links/">Links</a></li>
      
      
        <li><a href="/atom.xml">RSS</a></li>
      
    </ul>
    <div class="clearfix"></div>
  </nav>
  <div class="clearfix"></div>
</header>
    <div class="content">




  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2018/06/01/2018-06-01-oracle-11g-installation/">
  <time datetime="2018-06-01T13:51:00.000Z">
    Jun 1 2018
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2018/06/01/2018-06-01-oracle-11g-installation/">oracle 11g installation</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h3 id="1-安装依赖包"><a href="#1-安装依赖包" class="headerlink" title="1.    安装依赖包"></a>1.    安装依赖包</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep  pdksh<span class="number">-5.2</span><span class="number">.14</span><span class="number">-36.</span>el5</span><br><span class="line"></span><br><span class="line">rpm -ivh /int/rpm-ol6<span class="number">.6</span>/libaio-devel<span class="number">-0.3</span><span class="number">.107</span><span class="number">-10.</span>el6.x86_64.rpm</span><br><span class="line">rpm -ivh /int/rpm-ol6<span class="number">.6</span>/unixODBC<span class="number">-2.2</span><span class="number">.14</span><span class="number">-14.</span>el6.x86_64.rpm</span><br><span class="line">rpm -ivh /int/rpm-ol6<span class="number">.6</span>/unixODBC-devel<span class="number">-2.2</span><span class="number">.14</span><span class="number">-14.</span>el6.x86_64.rpm</span><br><span class="line"></span><br><span class="line">rpm -ivh /int/rpm-ol6<span class="number">.6</span>/telnet<span class="number">-0.17</span><span class="number">-48.</span>el6.x86_64.rpm</span><br><span class="line">rpm -ivh /int/rpm-ol6<span class="number">.6</span>/telnet-server<span class="number">-0.17</span><span class="number">-48.</span>el6.x86_64.rpm</span><br></pre></td></tr></table></figure>
<h3 id="2-更改系统配置"><a href="#2-更改系统配置" class="headerlink" title="2. 更改系统配置"></a>2. 更改系统配置</h3><h4 id="2-1"><a href="#2-1" class="headerlink" title="2.1"></a>2.1</h4><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysconfig/selinux</span><br><span class="line">SELINUX=disabled</span><br></pre></td></tr></table></figure>
<h4 id="2-2"><a href="#2-2" class="headerlink" title="2.2"></a>2.2</h4><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysctl.conf</span><br><span class="line">kernel.sem = <span class="number">250</span> <span class="number">32000</span> <span class="number">100</span> <span class="number">128</span></span><br><span class="line">net.ipv4.ip_local_port_range = <span class="number">9000</span> <span class="number">65500</span></span><br><span class="line">net.core.rmem_default = <span class="number">262144</span></span><br><span class="line">net.core.rmem_max = <span class="number">4194304</span></span><br><span class="line">net.core.wmem_default = <span class="number">262144</span></span><br><span class="line">net.core.wmem_max = <span class="number">1048576</span></span><br><span class="line">fs.aio-max-nr = <span class="number">1048576</span></span><br><span class="line">fs.file-max = <span class="number">6815744</span></span><br><span class="line"># 生效</span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure>
<h4 id="2-3"><a href="#2-3" class="headerlink" title="2.3"></a>2.3</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">vim</span> /etc/pam.d/login</span><br><span class="line">session     required    pam_limits.<span class="keyword">so</span></span><br></pre></td></tr></table></figure>
<h4 id="2-4"><a href="#2-4" class="headerlink" title="2.4"></a>2.4</h4><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/security/limits.conf</span><br><span class="line">oracle         soft    nproc    <span class="number">10000</span></span><br><span class="line">oracle         hard    nproc    <span class="number">16384</span></span><br><span class="line">oracle         soft    nofile   <span class="number">52768</span></span><br><span class="line">oracle         hard    nofile   <span class="number">6553</span></span><br><span class="line">root soft nproc <span class="number">2047</span></span><br><span class="line">root hard nproc <span class="number">16384</span></span><br><span class="line">root soft nofile <span class="number">1024</span></span><br><span class="line">root hard nofile <span class="number">65536</span></span><br></pre></td></tr></table></figure>
<h4 id="2-5-创建相关用户组"><a href="#2-5-创建相关用户组" class="headerlink" title="2.5 创建相关用户组"></a>2.5 创建相关用户组</h4><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">groupadd</span> oinstall </span><br><span class="line"><span class="title">groupadd</span> dba </span><br><span class="line"><span class="title">useradd</span> -g oinstall -<span class="type">G</span> dba oracle </span><br><span class="line"><span class="title">passwd</span> oracle // oracle</span><br><span class="line"></span><br><span class="line"><span class="title">id</span> oracle</span><br><span class="line"><span class="title">mkdir</span> -p /<span class="class"><span class="keyword">data</span>/app/oracle</span></span><br><span class="line"><span class="title">mkdir</span> -p /<span class="class"><span class="keyword">data</span>/app/oraInventory</span></span><br><span class="line"><span class="title">chown</span> -<span class="type">R</span> oracle:oinstall /<span class="class"><span class="keyword">data</span>/app/</span></span><br><span class="line"><span class="title">chmod</span> -<span class="type">R</span> <span class="number">755</span> /<span class="class"><span class="keyword">data</span></span></span><br></pre></td></tr></table></figure>
<h4 id="2-6-oracle用户生效"><a href="#2-6-oracle用户生效" class="headerlink" title="2.6 oracle用户生效"></a>2.6 oracle用户生效</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim /home/oracle/.bash_profile</span><br><span class="line">umask 022  </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ORACLE_BASE</span>=/data/app  </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ORACLE_HOME</span>=/data/app/oracle/product/11.2.0/db_1</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ORACLE_SID</span>=orcl  </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LANG</span>=en_US.UTF-8</span><br><span class="line"><span class="comment">#export NLS_LANG="SIMPLIFIED CHINESE_CHINA.ZHS16GBK"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">NLS_LANG</span>=<span class="string">"american_america.zhs16gbk"</span></span><br></pre></td></tr></table></figure>
<h4 id="2-7-全局生效"><a href="#2-7-全局生效" class="headerlink" title="2.7 全局生效"></a>2.7 全局生效</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/profile</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:/data/app/oracle/product/11.2.0/db_1/bin</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ORACLE_BASE</span>=/data/app  </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ORACLE_HOME</span>=/data/app/oracle/product/11.2.0/db_1</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ORACLE_SID</span>=orcl  </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LANG</span>=en_US.UTF-8</span><br><span class="line"><span class="comment">#export NLS_LANG="SIMPLIFIED CHINESE_CHINA.ZHS16GBK" </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">NLS_LANG</span>=<span class="string">"american_america.zhs16gbk"</span></span><br></pre></td></tr></table></figure>
<h3 id="3-静默安装"><a href="#3-静默安装" class="headerlink" title="3. 静默安装"></a>3. 静默安装</h3><h4 id="3-1"><a href="#3-1" class="headerlink" title="3.1"></a>3.1</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">vim response/db_install.rsp</span><br><span class="line">oracle<span class="selector-class">.install</span><span class="selector-class">.responseFileVersion</span>=/oracle/install/rspfmt_dbinstall_response_schema_v11_2_0</span><br><span class="line">oracle<span class="selector-class">.install</span><span class="selector-class">.option</span>=INSTALL_DB_SWONLY</span><br><span class="line">ORACLE_HOSTNAME=D65012</span><br><span class="line">INVENTORY_LOCATION=/data/app/oraInventory</span><br><span class="line">SELECTED_LANGUAGES=en,zh_CN,zh_TW</span><br><span class="line">ORACLE_HOME=/data/app/oracle/product/<span class="number">11.2</span>.<span class="number">0</span>/db_1</span><br><span class="line">ORACLE_BASE=/data/app</span><br><span class="line">oracle<span class="selector-class">.install</span><span class="selector-class">.db</span><span class="selector-class">.InstallEdition</span>=EE</span><br><span class="line">oracle<span class="selector-class">.install</span><span class="selector-class">.db</span><span class="selector-class">.isCustomInstall</span>=false</span><br><span class="line">oracle<span class="selector-class">.install</span><span class="selector-class">.db</span><span class="selector-class">.DBA_GROUP</span>=dba</span><br><span class="line">oracle<span class="selector-class">.install</span><span class="selector-class">.db</span><span class="selector-class">.OPER_GROUP</span>=oinstall</span><br><span class="line">oracle<span class="selector-class">.install</span><span class="selector-class">.db</span><span class="selector-class">.config</span><span class="selector-class">.starterdb</span><span class="selector-class">.type</span>=GENERAL_PURPOSE</span><br><span class="line">oracle<span class="selector-class">.install</span><span class="selector-class">.db</span><span class="selector-class">.config</span><span class="selector-class">.starterdb</span><span class="selector-class">.globalDBName</span>=ocrl</span><br><span class="line">oracle<span class="selector-class">.install</span><span class="selector-class">.db</span><span class="selector-class">.config</span><span class="selector-class">.starterdb</span><span class="selector-class">.SID</span>=ocrl</span><br><span class="line">oracle<span class="selector-class">.install</span><span class="selector-class">.db</span><span class="selector-class">.config</span><span class="selector-class">.starterdb</span><span class="selector-class">.characterSet</span>=AL32UTF8</span><br><span class="line">oracle<span class="selector-class">.install</span><span class="selector-class">.db</span><span class="selector-class">.config</span><span class="selector-class">.starterdb</span><span class="selector-class">.memoryOption</span>=true</span><br><span class="line">oracle<span class="selector-class">.install</span><span class="selector-class">.db</span><span class="selector-class">.config</span><span class="selector-class">.starterdb</span><span class="selector-class">.memoryLimit</span>=<span class="number">4069</span></span><br><span class="line">oracle<span class="selector-class">.install</span><span class="selector-class">.db</span><span class="selector-class">.config</span><span class="selector-class">.starterdb</span><span class="selector-class">.installExampleSchemas</span>=false</span><br><span class="line">oracle<span class="selector-class">.install</span><span class="selector-class">.db</span><span class="selector-class">.config</span><span class="selector-class">.starterdb</span><span class="selector-class">.enableSecuritySettings</span>=true</span><br><span class="line">oracle<span class="selector-class">.install</span><span class="selector-class">.db</span><span class="selector-class">.config</span><span class="selector-class">.starterdb</span><span class="selector-class">.password</span><span class="selector-class">.ALL</span>=oracle</span><br><span class="line">oracle<span class="selector-class">.install</span><span class="selector-class">.db</span><span class="selector-class">.config</span><span class="selector-class">.starterdb</span><span class="selector-class">.control</span>=DB_CONTROL</span><br><span class="line">oracle<span class="selector-class">.install</span><span class="selector-class">.db</span><span class="selector-class">.config</span><span class="selector-class">.starterdb</span><span class="selector-class">.dbcontrol</span>.\</span><br><span class="line">enableEmailNotification=false</span><br><span class="line">oracle<span class="selector-class">.install</span><span class="selector-class">.db</span><span class="selector-class">.config</span><span class="selector-class">.starterdb</span><span class="selector-class">.automatedBackup</span><span class="selector-class">.enable</span>=false</span><br><span class="line">SECURITY_UPDATES_VIA_MYORACLESUPPORT=false</span><br><span class="line">DECLINE_SECURITY_UPDATES=true</span><br></pre></td></tr></table></figure>
<h4 id="3-2"><a href="#3-2" class="headerlink" title="3.2"></a>3.2</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="regexp">/home/</span>oracle/oraInst.loc</span><br><span class="line">inventory_loc=<span class="regexp">/data/</span>app/oraInventory</span><br><span class="line">inst_group=oinstall</span><br><span class="line"></span><br><span class="line">chown <span class="string">oracle:</span>oinstall <span class="regexp">/home/</span>oracle/oraInst.loc</span><br><span class="line">chmod <span class="number">664</span> <span class="regexp">/home/</span>oracle/oraInst.loc</span><br></pre></td></tr></table></figure>
<h4 id="3-3"><a href="#3-3" class="headerlink" title="3.3"></a>3.3</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">su oracle</span><br><span class="line">[oracle<span class="meta">@D</span>65012 database]$  ./runInstaller -silent \</span><br><span class="line">-responseFile <span class="regexp">/home/</span>oracle<span class="regexp">/database/</span>response/db_install.rsp \</span><br><span class="line">-invPtrLoc <span class="regexp">/home/</span>oracle/oraInst.loc \</span><br><span class="line">-ignoreSysPrereqs -ignorePrereq</span><br><span class="line"></span><br><span class="line">su root</span><br><span class="line">sh <span class="regexp">/data/</span>app<span class="regexp">/oracle/</span>product<span class="regexp">/11.2.0/</span>db_1/root.sh</span><br></pre></td></tr></table></figure>
<h4 id="3-4-创建数据库实例"><a href="#3-4-创建数据库实例" class="headerlink" title="3.4 创建数据库实例"></a>3.4 创建数据库实例</h4><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">vi response/dbca.rsp</span><br><span class="line">[GENERAL]</span><br><span class="line">RESPONSEFILE_VERSION = <span class="string">"11.2.0"</span></span><br><span class="line">OPERATION_TYPE = <span class="string">"createDatabase"</span></span><br><span class="line">[CREATEDATABASE]</span><br><span class="line">GDBNAME = <span class="string">"D65012"</span></span><br><span class="line">SID = <span class="string">"orcl"</span></span><br><span class="line">TEMPLATENAME = <span class="string">"General_Purpose.dbc"</span></span><br><span class="line">SYSPASSWORD = <span class="string">"sys"</span></span><br><span class="line">SYSTEMPASSWORD = <span class="string">"sys"</span></span><br><span class="line">DATAFILEDESTINATION = /data/app/oracle/oradata</span><br><span class="line">CHARACTERSET = <span class="string">"ZHS16GBK"</span></span><br><span class="line">TOTALMEMORY = <span class="string">"4096"</span></span><br><span class="line"></span><br><span class="line">[oracle@D65012 response]$ dbca -silent -responseFile \</span><br><span class="line">/home/oracle/database/response/dbca.rsp</span><br></pre></td></tr></table></figure>
<h4 id="3-5-监听"><a href="#3-5-监听" class="headerlink" title="3.5 监听"></a>3.5 监听</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netca <span class="regexp">/silent /</span>responsefile <span class="regexp">/home/</span>oracle<span class="regexp">/database/</span>response<span class="regexp">/netca.rsp</span></span><br></pre></td></tr></table></figure>
<h5 id="3-5-1-listener-ora"><a href="#3-5-1-listener-ora" class="headerlink" title="3.5.1 listener.ora"></a>3.5.1 listener.ora</h5><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="string">/data/app/oracle/product/11.2.0/db_1/network/admin/listener.ora</span></span><br><span class="line">LISTENER =</span><br><span class="line">  <span class="params">(<span class="attr">DESCRIPTION_LIST</span> =</span></span><br><span class="line"><span class="params">    (<span class="attr">DESCRIPTION</span> =</span></span><br><span class="line"><span class="params">      (<span class="attr">ADDRESS</span> = (<span class="attr">PROTOCOL</span> = IPC)</span><span class="params">(<span class="attr">KEY</span> = EXTPROC1521)</span>)</span><br><span class="line">      <span class="params">(<span class="attr">ADDRESS</span> = (<span class="attr">PROTOCOL</span> = TCP)</span><span class="params">(<span class="attr">HOST</span> = D65012)</span><span class="params">(<span class="attr">PORT</span> = 1521)</span>)</span><br><span class="line">      <span class="params">(<span class="attr">ADDRESS_LIST</span> =</span></span><br><span class="line"><span class="params">        (<span class="attr">ADDRESS</span> = (<span class="attr">PROTOCOL</span> = IPC)</span><span class="params">(<span class="attr">KEY</span> = EXTPROC)</span>)</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">ADR_BASE_LISTENER = <span class="string">/data/app</span></span><br></pre></td></tr></table></figure>
<h5 id="3-5-2-tnsnames-ora"><a href="#3-5-2-tnsnames-ora" class="headerlink" title="3.5.2 tnsnames.ora"></a>3.5.2 tnsnames.ora</h5><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vim /data/app/oracle/product/<span class="number">11.2</span>.<span class="number">0</span>/db_1/network/admin/tnsnames.ora</span><br><span class="line"><span class="attr">LISTENER_D65012</span> =</span><br><span class="line">  (<span class="attr">ADDRESS</span> = (<span class="attr">PROTOCOL</span> = TCP)(<span class="attr">HOST</span> = <span class="number">10.119</span>.<span class="number">1.126</span>)(<span class="attr">PORT</span> = <span class="number">1521</span>))</span><br><span class="line"></span><br><span class="line"><span class="attr">D65012</span>  =</span><br><span class="line">  (<span class="attr">DESCRIPTION</span> =</span><br><span class="line">    (<span class="attr">ADDRESS</span> = (<span class="attr">PROTOCOL</span> = TCP)(<span class="attr">HOST</span> = <span class="number">10.119</span>.<span class="number">1.126</span>)(<span class="attr">PORT</span> = <span class="number">1521</span>))</span><br><span class="line">    (<span class="attr">CONNECT_DATA</span> =</span><br><span class="line">      (<span class="attr">SERVER</span> = DEDICATED)</span><br><span class="line">      (<span class="attr">SERVICE_NAME</span> = D65012)</span><br><span class="line">      (<span class="attr">UR=A)</span></span><br><span class="line">    )</span><br><span class="line">  )</span><br></pre></td></tr></table></figure>
<h5 id="3-5-3-lsnrctl"><a href="#3-5-3-lsnrctl" class="headerlink" title="3.5.3 lsnrctl"></a>3.5.3 lsnrctl</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lsnrctl <span class="keyword">start</span> </span><br><span class="line">lsnrctl <span class="keyword">status</span></span><br><span class="line">lsnrctl <span class="keyword">stop</span></span><br></pre></td></tr></table></figure>
<h5 id="3-5-4-mount"><a href="#3-5-4-mount" class="headerlink" title="3.5.4  mount"></a>3.5.4  mount</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sqlplus /nolog</span><br><span class="line">SQL&gt; conn / as sysdba;</span><br><span class="line">SQL&gt; alter<span class="built_in"> user system </span>identified by <span class="string">"oracle"</span>;</span><br><span class="line">SQL&gt; alter<span class="built_in"> user </span>sys identified by <span class="string">"oracle"</span>;</span><br><span class="line"></span><br><span class="line">SQL&gt; alter database mount;</span><br><span class="line">SQL&gt; alter database open;</span><br><span class="line">SQL&gt; show parameter service_name;</span><br><span class="line"></span><br><span class="line">SQL&gt; shutdown immediate; </span><br><span class="line">SQL&gt; startup;</span><br></pre></td></tr></table></figure>
<h5 id="3-5-5-apps"><a href="#3-5-5-apps" class="headerlink" title="3.5.5 apps"></a>3.5.5 apps</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; create<span class="built_in"> user </span>apps identified by <span class="string">"apps"</span>;</span><br><span class="line">SQL&gt; grant connect,resource <span class="keyword">to</span> apps;</span><br><span class="line"></span><br><span class="line">sqlplus apps/apps@localhost/helowin</span><br><span class="line">sqlplus sys/oracle@D65012/D65012 as sysdba</span><br></pre></td></tr></table></figure>
<h3 id="References"><a href="#References" class="headerlink" title="References"></a>References</h3><ul>
<li><a href="https://blog.csdn.net/jameshadoop/article/details/48223645" target="_blank" rel="noopener">https://blog.csdn.net/jameshadoop/article/details/48223645</a></li>
<li><a href="https://blog.csdn.net/jameshadoop/article/details/48086933" target="_blank" rel="noopener">https://blog.csdn.net/jameshadoop/article/details/48086933</a></li>
<li><a href="http://www.dbaexpert.com/blog/create-oracle-12c-rac-databases-in-silent-mode/" target="_blank" rel="noopener">http://www.dbaexpert.com/blog/create-oracle-12c-rac-databases-in-silent-mode/</a></li>
<li><a href="https://docs.oracle.com/cd/E11882_01/em.112/e12255/c_oui_appendix.htm#OUICG379" target="_blank" rel="noopener">https://docs.oracle.com/cd/E11882_01/em.112/e12255/c_oui_appendix.htm#OUICG379</a></li>
</ul>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>



  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/08/08/2016-08-08-Vagrant-Networks/">
  <time datetime="2016-08-08T13:51:00.000Z">
    Aug 8 2016
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/08/08/2016-08-08-Vagrant-Networks/">Vagrant Network</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h3 id="1-forwarded-port"><a href="#1-forwarded-port" class="headerlink" title="1.forwarded_port"></a>1.forwarded_port</h3><ol>
<li>First, you need to be explicit about every port you want to forward. </li>
<li>Forwarded ports are also accessible from outside your own computer. </li>
<li>And finally, with VirtualBox, Vagrant can’t forward to ports less than 1024 on the host system.</li>
</ol>
<ul>
<li>宿主机host的端口转发到虚拟机VM的某一个端口上</li>
<li>虚拟机可以访问外部网络</li>
</ul>
<h4 id="配置参数"><a href="#配置参数" class="headerlink" title="配置参数"></a>配置参数</h4><ul>
<li><code>guest</code>: </li>
<li><code>guest_ip</code>: </li>
<li><code>host</code>: &gt;1024    的端口</li>
<li><code>host_ip</code>: <ul>
<li>“127.0.0.1”: to forbid remote access to the forwarded port </li>
</ul>
</li>
<li><code>protocol</code>:  <ul>
<li>“tcp”</li>
<li>“udp” </li>
</ul>
</li>
<li><code>auto_correct</code>: <code>true</code> 防止端口占用(Autocorrecting Port Collisions)</li>
</ul>
<h4 id="V1"><a href="#V1" class="headerlink" title="V1"></a><del>V1</del></h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">config<span class="selector-class">.vm</span><span class="selector-class">.forward_port</span> <span class="number">80</span>, <span class="number">8080</span> </span><br><span class="line"><span class="selector-id">#config</span><span class="selector-class">.vm</span><span class="selector-class">.forwarded_port</span> <span class="number">80</span>, <span class="number">8080</span>, auto_correct: true</span><br><span class="line"><span class="selector-id">#config</span><span class="selector-class">.vm</span><span class="selector-class">.usable_port_range</span> = (<span class="number">2200</span>..<span class="number">2250</span>)</span><br><span class="line"><span class="selector-id">#config</span><span class="selector-class">.vm</span><span class="selector-class">.forwarded_port</span> <span class="number">80</span>, <span class="number">8080</span>, protocol: <span class="string">"udp"</span></span><br></pre></td></tr></table></figure>
<h4 id="V2"><a href="#V2" class="headerlink" title="V2"></a>V2</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">config.<span class="keyword">vm</span>.network :forwarded_port, gues<span class="variable">t:</span> <span class="number">80</span>, hos<span class="variable">t:</span> <span class="number">8888</span></span><br><span class="line">config.<span class="keyword">vm</span>.network :forwarded_port, gues<span class="variable">t:</span> <span class="number">80</span>, hos<span class="variable">t:</span> <span class="number">8888</span>, auto_correc<span class="variable">t:</span> true</span><br><span class="line">config.<span class="keyword">vm</span>.network <span class="string">"forwarded_port"</span>, gues<span class="variable">t:</span> <span class="number">8001</span>, hos<span class="variable">t:</span> <span class="number">8001</span>, host_ip: <span class="string">"127.0.0.1"</span></span><br><span class="line"></span><br><span class="line"># protoco<span class="variable">l:</span> <span class="string">"udp"</span></span><br></pre></td></tr></table></figure>
<h4 id="Pros"><a href="#Pros" class="headerlink" title="Pros"></a>Pros</h4><ul>
<li>容易实现外网访问虚拟机</li>
</ul>
<h4 id="Cons"><a href="#Cons" class="headerlink" title="Cons"></a>Cons</h4><ul>
<li>端口较多时比较麻烦,需手动配置</li>
<li>不支持在宿主机器上使用小于1024的端口来转发。比如：不能使用SSL的443端口来进行https连接</li>
<li>It is a communication channel that originates on the host side; you cannot use it for NFS or X11 because port forwarding doesn’t allow the guest to communicate with services running on the host.</li>
<li>Port Collision(One port on your host can be assigned to only one service.)</li>
</ul>
<h3 id="2-Private-network-Host-Only"><a href="#2-Private-network-Host-Only" class="headerlink" title="2. Private network(Host-Only)"></a>2. Private network(Host-Only)</h3><ul>
<li>Vagrant supports host-only networks by specifying a static IP for the machine.        </li>
<li>The machine can then be accessed directly using this IP.        </li>
<li>Machines outside of the host, such as other machines on the local network, cannot access the assigned static IP.</li>
<li>The virtual machines can also communicate with the host itself. This can be useful for accessing services running on the host machine. Forwarded ports, on the other hand, can only be accessed from the host machine. The guest can’t talk to the host.(属主机host可以访问虚拟机)</li>
<li>Host-only networks that multiple virtual machines can communicate with each other by being a part of the same network. (同一网段的虚拟机可以相互访问)</li>
<li>虚拟机可以访问外部网络</li>
</ul>
<h4 id="配置参数-1"><a href="#配置参数-1" class="headerlink" title="配置参数"></a>配置参数</h4><ul>
<li>手动配置IP    <ul>
<li><code>config.vm.network &quot;private_network&quot;, ip: &quot;10.20.30.40&quot;</code> </li>
</ul>
</li>
<li>VirtualBox built-in DHCP server<ul>
<li><code>config.vm.network &quot;private_network&quot;, type: &quot;dhcp&quot;</code>  </li>
</ul>
</li>
</ul>
<h4 id="V1-1"><a href="#V1-1" class="headerlink" title="V1"></a><del>V1</del></h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">config</span><span class="selector-class">.vm</span><span class="selector-class">.network</span> "<span class="selector-tag">hostonly</span>", "192<span class="selector-class">.168</span><span class="selector-class">.33</span><span class="selector-class">.10</span>"</span><br></pre></td></tr></table></figure>
<h4 id="V2-1"><a href="#V2-1" class="headerlink" title="V2"></a>V2</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">config</span><span class="selector-class">.vm</span><span class="selector-class">.network</span> "<span class="selector-tag">private_network</span>", <span class="selector-tag">ip</span>: "10<span class="selector-class">.11</span><span class="selector-class">.100</span><span class="selector-class">.200</span>"</span><br><span class="line"><span class="selector-tag">config</span><span class="selector-class">.vm</span><span class="selector-class">.network</span> "<span class="selector-tag">private_network</span>", <span class="selector-tag">ip</span>: "192<span class="selector-class">.168</span><span class="selector-class">.33</span><span class="selector-class">.10</span>"</span><br></pre></td></tr></table></figure>
<h4 id="Pros-1"><a href="#Pros-1" class="headerlink" title="Pros"></a>Pros</h4><ul>
<li>安全, 只有自己能访问</li>
<li>Avoid typing the configuration of each forwarded port separately</li>
<li>Avoid using port numbers such as 8800 for well-known services</li>
<li>Use the same port numbers in different projects</li>
<li>Communicate between multiple guests</li>
<li>Use NFS for shared directories</li>
</ul>
<h4 id="Cons-1"><a href="#Cons-1" class="headerlink" title="Cons"></a>Cons</h4><ul>
<li>Because it is isolated, coworkers and team members who may be working on the same project can’t look at your work.(私有网络,不能团队协作)</li>
<li>宿主机上会自动创建虚拟网卡,<code>destory</code>虚拟机也不会自动删除</li>
</ul>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ifconfig </span><br><span class="line">VBoxManage hostonlyif <span class="builtin-name">remove</span> vboxnet0</span><br><span class="line">VBoxManage hostonlyif <span class="builtin-name">remove</span> vboxnet1</span><br><span class="line">VBoxManage hostonlyif <span class="builtin-name">remove</span> vboxnet2</span><br><span class="line">VBoxManage list hostonlyifs</span><br></pre></td></tr></table></figure>
<ul>
<li>dhcp</li>
</ul>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VBoxManage <span class="built_in">list</span> dhcpservers</span><br><span class="line">VBoxManage dhcpserver remove <span class="comment">--netname HostInterfaceNetworking-vboxnet0</span></span><br></pre></td></tr></table></figure>
<h3 id="3-public-network-Bridged-Networking"><a href="#3-public-network-Bridged-Networking" class="headerlink" title="3. public network(Bridged Networking)"></a>3. public network(Bridged Networking)</h3><ul>
<li>Bridged networking bridges the virtual machine onto a device on your physical machine, making the virtual machine look like another separate physical machine on the network.(虚拟机像实体机一样的网络配置, 也可以有静态IP)</li>
<li>It becomes available for remote access.</li>
</ul>
<h4 id="V1-2"><a href="#V1-2" class="headerlink" title="V1"></a><del>V1</del></h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config<span class="selector-class">.vm</span><span class="selector-class">.network</span> <span class="string">"bridged"</span></span><br></pre></td></tr></table></figure>
<h4 id="V2-2"><a href="#V2-2" class="headerlink" title="V2"></a>V2</h4><ul>
<li>default</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config<span class="selector-class">.vm</span><span class="selector-class">.network</span> <span class="string">"public_network"</span></span><br></pre></td></tr></table></figure>
<ul>
<li>静态IP</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">config</span><span class="selector-class">.vm</span><span class="selector-class">.network</span> "<span class="selector-tag">public_network</span>", <span class="selector-tag">ip</span>: "192<span class="selector-class">.168</span><span class="selector-class">.1</span><span class="selector-class">.120</span>"</span><br></pre></td></tr></table></figure>
<ul>
<li>公有网络中还可以设置桥接的网卡</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config<span class="selector-class">.vm</span><span class="selector-class">.network</span> <span class="string">"public_network"</span>, :bridge =&gt; <span class="string">'en1: Wi-Fi (AirPort)'</span></span><br></pre></td></tr></table></figure>
<h4 id="Pros-2"><a href="#Pros-2" class="headerlink" title="Pros"></a>Pros</h4><ul>
<li>方便团队协作，别人可以访问你的虚拟机</li>
</ul>
<h4 id="Cons-2"><a href="#Cons-2" class="headerlink" title="Cons"></a>Cons</h4><ul>
<li>需要有网络，有路由器分配IP</li>
</ul>
<h3 id="4-Composing-Networking-Options"><a href="#4-Composing-Networking-Options" class="headerlink" title="4. Composing Networking Options"></a>4. Composing Networking Options</h3><ul>
<li>同一VM网络可组合</li>
</ul>
<h4 id="V1-3"><a href="#V1-3" class="headerlink" title="V1"></a><del>V1</del></h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config<span class="selector-class">.vm</span><span class="selector-class">.forwarded_port</span> <span class="number">80</span>, <span class="number">8080</span>config<span class="selector-class">.vm</span><span class="selector-class">.network</span> <span class="string">"hostonly"</span>, <span class="string">"192.168.33.10"</span>config<span class="selector-class">.vm</span><span class="selector-class">.network</span> <span class="string">"bridged"</span></span><br></pre></td></tr></table></figure>
<h4 id="The-static-IP-for-private-networks"><a href="#The-static-IP-for-private-networks" class="headerlink" title="The static IP for private networks"></a>The static IP for private networks</h4><ul>
<li><code>10.0.0.0-10.255.255.255</code> (<code>10/8</code> prefix)</li>
<li><code>172.16.0.0-172.31.255.255</code> (<code>172.16/12</code> prefix)</li>
<li><code>192.168.0.0-192.168.255.255</code> (<code>192.168/16</code> prefix)</li>
</ul>
<h4 id="vagrant-hosts"><a href="#vagrant-hosts" class="headerlink" title="vagrant-hosts"></a><code>vagrant-hosts</code></h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vagrant plugin install vagrant-hosts</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">web</span><span class="selector-class">.vm</span><span class="selector-class">.provision</span> <span class="selector-pseudo">:hosts</span></span><br></pre></td></tr></table></figure>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>



  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/05/01/2016-05-01-statistics-learning-0001/">
  <time datetime="2016-05-01T13:51:00.000Z">
    May 1 2016
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/05/01/2016-05-01-statistics-learning-0001/">统计学习第一章</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h3 id="第一章-基础"><a href="#第一章-基础" class="headerlink" title="第一章 基础"></a>第一章 基础</h3><h4 id="1-一般步骤"><a href="#1-一般步骤" class="headerlink" title="1. 一般步骤:"></a>1. 一般步骤:</h4><ol>
<li>得到一个有限训练集(Date Set)</li>
<li>确定假设空间(学习模型的集合Model Set)</li>
<li>确定模型的选择准则(学习策略Strategy)</li>
<li>实现求解最优化模型的算法(Algotithm)</li>
<li>通过学习方法选择最有模型</li>
<li>利用学习的最优模型对新数据集进行预测或分析</li>
</ol>
<p><img src="http://img.hb.aicdn.com/d1912cce39b6c090ab97c438335f00334cf5259313637-9BC80a_fw658" alt=""></p>
<p><img src="http://img.hb.aicdn.com/8b4c60e1dffa92421d1a92d81eb627c30d3751d0f8ed-JaCpaw_fw658" alt=""></p>
<h4 id="2-模型"><a href="#2-模型" class="headerlink" title="2. 模型"></a>2. 模型</h4><h5 id="2-1-非概率模型"><a href="#2-1-非概率模型" class="headerlink" title="2.1 非概率模型"></a>2.1 非概率模型</h5><ul>
<li>决策函数空间:</li>
</ul>
<script type="math/tex; mode=display">
\mathscr{F}=\\{f|Y=f(X)\\} \tag{1}</script><ul>
<li>参数向量$ \theta \in \mathbf{R}^n $决定的函数族:</li>
</ul>
<script type="math/tex; mode=display">
\mathscr{F}=\\{f|Y=f_{\theta}(X),\theta \in \mathbf{R}^n\\} \tag{2}</script><h5 id="2-2-概率模型"><a href="#2-2-概率模型" class="headerlink" title="2.2 概率模型"></a>2.2 概率模型</h5><ul>
<li><p>条件概率集合:</p>
<script type="math/tex; mode=display">
\mathscr{F}=\\{P|P(Y|X)\\} \tag{3}</script></li>
<li><p>参数向量$$$\theta \in \mathbf{R}^n$$$决定的条件概率分布族:</p>
</li>
</ul>
<script type="math/tex; mode=display">
\mathscr{F}=\\{P|P_{\theta}(Y|X),\theta \in \mathbf{R}^n\\} \tag{4}</script><h4 id="3-策略"><a href="#3-策略" class="headerlink" title="3. 策略"></a>3. 策略</h4><h5 id="3-1-损失函数或风险函数"><a href="#3-1-损失函数或风险函数" class="headerlink" title="3.1 损失函数或风险函数"></a>3.1 损失函数或风险函数</h5><ul>
<li>$ \text{0-1}\ Loss\ Function $</li>
</ul>
<p>\[<br>    L(Y,f(X)) =<br>    \begin{cases}<br>        1,  &amp;\text{$Y \ne f(X)$}\\\<br>        0, &amp;\text{$Y=f(X)$}<br>    \end{cases} \tag{5}<br>\]</p>
<ul>
<li>$ Quadratic\ Loss\ Function $</li>
</ul>
<p>\[<br>    L(Y,f(X)) = (Y-f(X))^2 \tag{6}<br>\]</p>
<ul>
<li>$ Absolute\ Loss\ Function $</li>
</ul>
<p>\[<br>    L(Y,f(X)) = |Y-f(X)| \tag{7}<br>\]</p>
<ul>
<li>$ Logarithmic\ Loss\ Function\ or\ \text{log-likelihood}\ Loss\ Function $</li>
</ul>
<p>\[<br>    L(Y,P(Y|X)) = -logP(Y|X) \tag{8}<br>\]</p>
<ul>
<li>$ Risk\ Function\ or\ Expected\ Loss $ </li>
</ul>
<p>\[<br>R_{exp}(f)=E_p[L(Y,P(Y|X))]= \int_\{x \times y\} L(y,f(x))P(x,y)dxdy \tag{9}<br>\]</p>
<p>联合分布$ P(X,Y) $未知, $ R_{exp}(f) $不能直接计算.</p>
<ul>
<li>$ Empirical\ Risk\ or\ Empirical\ Loss $ </li>
</ul>
<p>\[<br>R_{emp}(f)=\frac{1}{N} \sum_{i=1}^{N}L(y_i,f(x_i)) \tag{10}<br>\]</p>
<p>期望风险$ R_{exp}(f) $是模型关于联合分布的期望损失, 经验风险$ R_{emp}(f) $是模型关于训练样本集的平均损失.</p>
<p>根据大数定律 $ \lim_{N\to\infty}R_{emp}=R_{exp} $.可用经验风险估计期望风险.</p>
<ul>
<li>经验风险最小化:</li>
</ul>
<p>\[<br>min_{f \in \mathscr{F}}R_{emp}(f)=min_{f \in \mathscr{F}}\frac{1}{N} \sum_{i=1}^{N}L(y_i,f(x_i)) \tag{11}<br>\]</p>
<p>当样本容量足够大,经验风险最小化能保证很好的学习效果,如<strong>MLE</strong>$ 极大似然估计(Maximum\ Likelihood\ Estimation) $.</p>
<p>当模型是条件概率分布,损失函数是对数函数时,经验风险最小化(<strong>EMP</strong>)等价于极大似然估计(<strong>MLE</strong>).</p>
<p>但是,当样本容量很小时,会产生过拟合(<strong>over-fitting</strong>)现象.于是,为了防止过拟合,可采用结构风险最小化(<strong>Structural Risk Minimization,SRM</strong>).</p>
<ul>
<li>$ Structural\ Risk\ or\ Structural\ Loss $ </li>
</ul>
<p>\[<br>R_{srm}(f)=\frac{1}{N} \sum_{i=1}^{N}L(y_i,f(x_i))  + \lambda J(f) \tag{12}<br>\]</p>
<p>结构风险在经验风险上加上表示模型复杂度的正则化项(<strong>regularizer</strong>)或罚项(<strong>penalty term</strong>).</p>
<p>结构风险最小化(<strong>SRM</strong>)等价于正则化(<strong>Regularization</strong>).</p>
<p>$ J(f) $为模型的复杂度,是定义在假设空间$ \mathscr{F} $上的泛函.模型越复杂,复杂度越大,复杂度一定意义上表示了对复杂模型的惩罚.</p>
<ul>
<li>结构风险最小化:</li>
</ul>
<p>\[<br>min_{f \in \mathscr{F}}R_{srm}(f)=min_{f \in \mathscr{F}}\frac{1}{N} \sum_{i=1}^{N}L(y_i,f(x_i))  + \lambda J(f) \tag{13}<br>\]</p>
<p>如贝叶斯估计中的最大后验概率估计(<strong>Maximum Posterior Probability,MAP</strong>)就是结构风险最小化的一个例子.</p>
<p>当模型是条件概率分布,损失函数是对数函数,模型复杂度由模型的先验概率表示时,结构风险最小化(<strong>SRM</strong>)等价于最大后验概率估计(<strong>MAP</strong>).</p>
<h4 id="4-算法"><a href="#4-算法" class="headerlink" title="4. 算法"></a>4. 算法</h4><p>统计学习问题归结为最优化问题,统计学习的算法成为求解最优化问题的算法.</p>
<ol>
<li>有解析式,解析求解</li>
<li>无解析式,数值计算</li>
</ol>
<h4 id="5-模型评估与模型选择"><a href="#5-模型评估与模型选择" class="headerlink" title="5. 模型评估与模型选择"></a>5. 模型评估与模型选择</h4><h5 id="5-1-训练误差与测试误差"><a href="#5-1-训练误差与测试误差" class="headerlink" title="5.1 训练误差与测试误差"></a>5.1 训练误差与测试误差</h5><ol>
<li>基于损失函数的训练误差(training error).训练误差的大小,对判断给定的问题是不是一个容易学习的问题是有意义的,但本质上不重要.</li>
<li>基于模型的测试误差(test error).测试误差反映了学习方法对未知的测试数据集的预测能力,测试误差小的方法通常有更好的预测能力(也称泛化能力generralization ability),是更有效的方法.</li>
</ol>
<p><strong><em>Remarks:</em></strong>学习时具体采用的损失函数未必是评估时使用的损失函数.当然,让二者一致是比较理想的.</p>
<ul>
<li>训练误差是学习到的模型$ \widehat{Y}=\widehat{f}(X) $ 关于训练集的平均损失:</li>
</ul>
<p>\[<br>R_{emp}(\widehat{f})=\frac{1}{N} \sum_{i=1}^{N}L(y_i,\widehat{f}(x_i)) \tag{14}<br>\]</p>
<ul>
<li>测试误差是学习到的模型$ \widehat{Y}=\widehat{f}(X) $ 关于测试集的平均损失:</li>
</ul>
<p>\[<br>e_{test}(\widehat{f})=\frac{1}{M} \sum_{i=1}^{M}L(y_i,\widehat{f}(x_i)) \tag{15}<br>\]</p>
<p><strong>e.g.</strong> 当损失函数是0/1损失时,测试误差就变成了常见的测试数据集上的误差率(error rate)        </p>
<p>\[<br>e_{test}(\widehat{f})=\frac{1}{M} \sum_{i=1}^{M}I(y_i \ne \widehat{f}(x_i)) \tag{16}<br>\]    </p>
<p>相应的,常见测试数据集上的准确率(accuracy):</p>
<p>\[<br>    r_{test}(\widehat{f})=\frac{1}{M} \sum_{i=1}^{M}I(y_i = \widehat{f}(x_i)) \tag{16}<br>\]    </p>
<p>显然, \[ e_{test} + r_{test} = 1\]</p>
<h5 id="5-2-过拟合与模型选择"><a href="#5-2-过拟合与模型选择" class="headerlink" title="5.2 过拟合与模型选择"></a>5.2 过拟合与模型选择</h5><p><strong>过拟合(Over-fitting):</strong>学习时选择的模型所包含的参数过多,以致于出现模型对已知数据(训练集)预测很好,对未知数据预测很差的现象.</p>
<p>多项式拟合的例子(P27)说明:当模型的复杂度增大时,训练误差会逐渐减小并趋向0;而测试误差会先减小后增大.当选择的模型复杂度过大,过拟合的现象就会发生.</p>
<h5 id="5-3-正则化与交叉验证"><a href="#5-3-正则化与交叉验证" class="headerlink" title="5.3 正则化与交叉验证"></a>5.3 正则化与交叉验证</h5><ul>
<li>正则化(Regularization):正则化是结构风险最小化策略的实现,是经验风险加上一个正则化项或罚项,正则化项一般是模型复杂度的单调递增函数,比如模型参数向量的范数.</li>
</ul>
<p><strong>e.g.</strong>:回归问题中,损失函数是平方损失,正则化项可以是参数向量的$ L_2 $范数.</p>
<p>\[L(w)=\frac{1}{N} \sum_{i=1}^{N}(f(x_i;w)-y_i))^2  + \frac{\lambda}{2}||w||_1  \tag{17}\]</p>
<ul>
<li>能够很好地解释已知数据并且十分简单才是好地模型.</li>
<li>从贝叶斯估计的角度来看,正则项对英语模型的先验概率,可以假设复杂的模型有较大的先验概率.</li>
</ul>
<ul>
<li>交叉验证(Cross Validation):</li>
</ul>
<p>数据充足时,随机分层:</p>
<ul>
<li>training set</li>
<li>validation set</li>
<li>test set</li>
</ul>
<p>数据不足时,交叉验证:重复使用数据,将给定的数据进行切分,将切分的数据合为训练集和测试集,在此基础上反复进行训练.</p>
<ol>
<li>简单交叉验证:(70%training set,30%test set)</li>
<li>S-fold cross validation:随机分成S个互不相交的大小相同的子集,S-1个用于训练,余下测试;对可能的S种组合重复选择,选出S次评测种平均测试误差最小的.</li>
<li>留一交叉验证(leave-one-out cross validation):S=N,往往数据缺乏的情况下使用.</li>
</ol>
<h4 id="6-泛化能力"><a href="#6-泛化能力" class="headerlink" title="6.泛化能力"></a>6.泛化能力</h4><p>Generalization Ability:对未知数据的预测能力.一般通过测试误差来评价.</p>
<h5 id="6-1-泛化误差-generalization-error"><a href="#6-1-泛化误差-generalization-error" class="headerlink" title="6.1 泛化误差(generalization error)"></a>6.1 泛化误差(generalization error)</h5><p>事实上,范化误差就是所学习到的模型的期望风险.<br>\[<br>R_{exp}(\widehat{f})=E_p[L(Y,\widehat{f}(X))]= \int_\{x \times y\} L(y,\widehat{f}(x))P(x,y)dxdy \tag{18}<br>\]</p>
<h5 id="6-2-泛化误差上界-generalization-error-bound"><a href="#6-2-泛化误差上界-generalization-error-bound" class="headerlink" title="6.2 泛化误差上界(generalization error bound)"></a>6.2 泛化误差上界(generalization error bound)</h5><ul>
<li>性质<ul>
<li>它是样本容量的函数</li>
<li>它是假设空间的函数</li>
</ul>
</li>
</ul>
<p><strong>e.g.</strong>:二分类问题的泛化误差上界<br>    <strong>Hoeffding不等式</strong>: $ S_n=\sum_{i=1}^{n}X_i $是独立随机变量$ X_1,X_2,..,X_n $之和,$ X_i \in [a_i,b_i] $,则对任意$ t&gt;0 $,以下不等式成立:</p>
<p>\[<br>P(S_n-E[S_n] \geqslant t) \leqslant \exp{\frac{-2t^2}{\sum_{i=1}^{n}(b_i-a_i)^2}} \tag{19}<br>\]</p>
<p>\[<br>P(E[S_n] - S_n \leqslant t) \geqslant \exp{\frac{-2t^2}{\sum_{i=1}^{n}(b_i-a_i)^2}} \tag{20}<br>\]</p>
<h4 id="7-生成模型与判别模型"><a href="#7-生成模型与判别模型" class="headerlink" title="7. 生成模型与判别模型"></a>7. 生成模型与判别模型</h4><ol>
<li>监督学习的任务就是学习一个模型决策函数$ Y=f(X) $或条件概率分布$ P(Y|X) $</li>
<li>监督学习的方法可以分为生成方法(generative approach)和判别方法(discriminative approach)</li>
</ol>
<h5 id="7-1-生成模型-Generative-Model"><a href="#7-1-生成模型-Generative-Model" class="headerlink" title="7.1 生成模型(Generative Model)"></a>7.1 生成模型(Generative Model)</h5><p>由数据学习联合概率分布$ P(X,Y) $,然后求出条件概率分布$ P(Y|X) $.即给定X,输出Y.</p>
<p>\[<br>P(Y|X)=\frac{P(X,Y)}{P(X)}<br>\]</p>
<p><strong>e.g.</strong>:</p>
<ul>
<li>朴素贝叶斯</li>
<li>隐马尔可夫链HMM</li>
</ul>
<p><strong>特点</strong>:</p>
<ul>
<li>可还原出联合概率分布$ P(X,Y) $</li>
<li>收敛速度更快</li>
<li>存在隐变量时仍适用    </li>
</ul>
<h5 id="7-2-判别模型-Discriminative-Model"><a href="#7-2-判别模型-Discriminative-Model" class="headerlink" title="7.2 判别模型(Discriminative Model)"></a>7.2 判别模型(Discriminative Model)</h5><p>直接学习决策函数$ Y=f(X) $或条件概率分布$ P(Y|X) $.对应给定的输入X,应该预测什么样的输出Y</p>
<p><strong>e.g.</strong>:</p>
<ul>
<li>k近邻法</li>
<li>感知机</li>
<li>决策树</li>
<li>逻辑回归</li>
<li>最大熵</li>
<li>支持向量机SVM</li>
<li>提升方法</li>
<li>条件随机场</li>
</ul>
<p><strong>特点</strong>:</p>
<ul>
<li>直接面对预测,往往准确率更高</li>
<li>可以对数据进行各种程度的抽象,定义特征并适用,简化学习问题</li>
</ul>
<h4 id="8-分类问题"><a href="#8-分类问题" class="headerlink" title="8.分类问题"></a>8.分类问题</h4><p>输出变量Y是有限个离散值时,监督学习的预测问题变成分类问题.输入变量X可以是离散的,也可以是连续的.</p>
<ul>
<li>classifier</li>
<li>prediction-&gt;classification</li>
<li>class</li>
</ul>
<h5 id="8-1-二分类问题"><a href="#8-1-二分类问题" class="headerlink" title="8.1 二分类问题"></a>8.1 二分类问题</h5><ul>
<li>$ TP $ 将正类预测为正类</li>
<li>$ FN $ 将正类预测为负类</li>
<li>$ FP $ 将负类预测为正类</li>
<li>$ TN $ 将负类预测为负类</li>
<li>精确率(precision) \[P=\frac{TP}{TP+FP}\]</li>
<li>召回率(recall) \[R=\frac{TP}{TP+FN}\]</li>
<li>$ F_1 $值:精确率和召回率的调和平均 \[F_1=\frac{2TP}{2TP+FP+FN}\]</li>
</ul>
<h5 id="8-2-标注问题-tagging"><a href="#8-2-标注问题-tagging" class="headerlink" title="8.2 标注问题(tagging)"></a>8.2 标注问题(tagging)</h5><p>输入一个观测序列,输出一个标记序列或状态序列,是分类问题的一个推广.</p>
<ul>
<li>HMM</li>
<li>SGD</li>
<li>信息抽取,NLP</li>
</ul>
<h4 id="9-回归问题-Regression"><a href="#9-回归问题-Regression" class="headerlink" title="9.回归问题(Regression)"></a>9.回归问题(Regression)</h4><p>用于预测输入变量X(自变量)和输出变量Y(因变量)之间的关系,等价于函数拟合.</p>
<ul>
<li>一元回归和多元回归</li>
<li>线性回归和非线性回归</li>
<li>平方损失函数-&gt;最小而乘法(Least Squares)</li>
<li>应用于市场预测／产品质量管理／客户满意度／投资风险分析等</li>
</ul>
<h3 id="Roadmap"><a href="#Roadmap" class="headerlink" title="Roadmap"></a>Roadmap</h3><p><img src="http://blogs.sas.com/content/subconsciousmusings/files/2017/04/CheatSheet.png" alt=""></p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>



  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/03/15/2016-03-15-zookeeper-and-docker/">
  <time datetime="2016-03-15T07:51:00.000Z">
    Mar 15 2016
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/03/15/2016-03-15-zookeeper-and-docker/">用docker创建zookeeper集群</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>参考dynamic-zookeeper-cluster-with-docker<sup><a href="#fn_1" id="reffn_1">1</a></sup>，可用来动态增加zookeeper结点，这里主要稍微修正了时区和id添加的问题。</p>
<h3 id="1-创建-Dockerfile"><a href="#1-创建-Dockerfile" class="headerlink" title="1. 创建 Dockerfile"></a>1. 创建 Dockerfile</h3><p>安装jdk 及 zookeeper</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu</span><br><span class="line"></span><br><span class="line"><span class="comment"># update time </span></span><br><span class="line">RUN echo <span class="string">"Asia/Shanghai"</span> &gt; <span class="regexp">/etc/timezone</span></span><br><span class="line">RUN dpkg-reconfigure -f noninteractive tzdata</span><br><span class="line"></span><br><span class="line">RUN apt-get update</span><br><span class="line">RUN apt-get -y install wget bash vim &amp;&amp; apt-get clean</span><br><span class="line"></span><br><span class="line"><span class="comment"># install java</span></span><br><span class="line">RUN wget <span class="symbol">http:</span>/<span class="regexp">/119.254.110.32:8081/download</span><span class="regexp">/jdk1.7.0_60.tar.gz \</span></span><br><span class="line"><span class="regexp">   &amp;&amp; tar -xvzf  jdk1.7.0_60.tar.gz \</span></span><br><span class="line"><span class="regexp">   &amp;&amp; mv jdk1.7.0_60 /usr</span><span class="regexp">/share/</span> \</span><br><span class="line">   &amp;&amp; rm -rf /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">jvm</span>/<span class="title">java</span>-1.7-<span class="title">openjdk</span> \</span></span><br><span class="line">   &amp;&amp; mkdir -p /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">jvm</span>/ \</span></span><br><span class="line">   &amp;&amp; ln -s /usr/share/jdk1.<span class="number">7.0_60</span> /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">jvm</span>/<span class="title">java</span>-1.7-<span class="title">openjdk</span> \</span></span><br><span class="line">   &amp;&amp; rm -rf jdk1.<span class="number">7.0_60</span>.tar.gz</span><br><span class="line"></span><br><span class="line">ENV JAVA_HOME /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">jvm</span>/<span class="title">java</span>-1.7-<span class="title">openjdk</span>/</span></span><br><span class="line"></span><br><span class="line">RUN apt-get -y install git ant &amp;&amp; apt-get clean</span><br><span class="line"></span><br><span class="line"><span class="comment"># install zookeeper</span></span><br><span class="line">RUN mkdir /tmp/zookeeper</span><br><span class="line">WORKDIR /tmp/zookeeper</span><br><span class="line">RUN git clone <span class="symbol">https:</span>/<span class="regexp">/github.com/apache</span><span class="regexp">/zookeeper.git .</span></span><br><span class="line"><span class="regexp">RUN git checkout release-3.5.1-rc2</span></span><br><span class="line"><span class="regexp">RUN ant jar</span></span><br><span class="line"><span class="regexp">RUN cp /tmp</span><span class="regexp">/zookeeper/conf</span><span class="regexp">/zoo_sample.cfg \</span></span><br><span class="line"><span class="regexp">    /tmp</span><span class="regexp">/zookeeper/conf</span><span class="regexp">/zoo.cfg</span></span><br><span class="line"><span class="regexp">RUN echo "standaloneEnabled=false" &gt;&gt; /tmp</span><span class="regexp">/zookeeper/conf</span><span class="regexp">/zoo.cfg</span></span><br><span class="line"><span class="regexp">RUN echo "dynamicConfigFile=/tmp</span><span class="regexp">/zookeeper/conf</span><span class="regexp">/zoo.cfg.dynamic" &gt;&gt; /tmp</span><span class="regexp">/zookeeper/conf</span><span class="regexp">/zoo.cfg</span></span><br><span class="line"><span class="regexp">ADD zk-init.sh /usr</span><span class="regexp">/local/bin</span><span class="regexp">/</span></span><br><span class="line"><span class="regexp">ENTRYPOINT ["/usr</span><span class="regexp">/local/bin</span><span class="regexp">/zk-init.sh"]</span></span><br></pre></td></tr></table></figure>
<p>zookeeper 初始化脚本 <code>zk-init.sh</code></p>
<p>需要指定自己的id和ip以及第一个zookeeper结点的ip。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">MYID</span>=<span class="variable">$1</span></span><br><span class="line"><span class="attribute">MYIP</span>=<span class="variable">$2</span></span><br><span class="line"><span class="attribute">ZK</span>=<span class="variable">$3</span></span><br><span class="line"><span class="attribute">IPADDRESS</span>=<span class="variable">$MYIP</span></span><br><span class="line"></span><br><span class="line">cd /tmp/zookeeper</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$ZK</span>"</span> ];then</span><br><span class="line">  <span class="attribute">output</span>=`./bin/zkCli.sh -server <span class="variable">$ZK</span>:2181 \</span><br><span class="line">      <span class="builtin-name">get</span> /zookeeper<span class="built_in">/config </span>| grep ^server`</span><br><span class="line">  #echo <span class="variable">$output</span> &gt;&gt; /tmp/zookeeper/conf/zoo.cfg.dynamic</span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$output</span>; <span class="keyword">do</span> echo <span class="variable">$i</span> &gt;&gt; /tmp/zookeeper/conf/zoo.cfg.dynamic; done</span><br><span class="line">  echo <span class="string">"server.<span class="variable">$MYID</span>=<span class="variable">$IPADDRESS</span>:2888:3888:observer;2181"</span> \</span><br><span class="line">      &gt;&gt; /tmp/zookeeper/conf/zoo.cfg.dynamic</span><br><span class="line">  cp /tmp/zookeeper/conf/zoo.cfg.dynamic \</span><br><span class="line">      /tmp/zookeeper/conf/zoo.cfg.dynamic.org</span><br><span class="line">  /tmp/zookeeper/bin/zkServer-initialize.sh \</span><br><span class="line">      --force <span class="attribute">--myid</span>=<span class="variable">$MYID</span></span><br><span class="line">  <span class="attribute">ZOO_LOG_DIR</span>=/var/log</span><br><span class="line">  <span class="attribute">ZOO_LOG4J_PROP</span>=<span class="string">'INFO,CONSOLE,ROLLINGFILE'</span></span><br><span class="line">  /tmp/zookeeper/bin/zkServer.sh start</span><br><span class="line">  /tmp/zookeeper/bin/zkCli.sh -server <span class="variable">$ZK</span>:2181 reconfig \</span><br><span class="line">      -<span class="builtin-name">add</span> <span class="string">"server.<span class="variable">$MYID</span>=<span class="variable">$IPADDRESS</span>:2888:3888:participant;2181"</span></span><br><span class="line">  /tmp/zookeeper/bin/zkServer.sh stop</span><br><span class="line">  <span class="attribute">ZOO_LOG_DIR</span>=/var/log</span><br><span class="line">  <span class="attribute">ZOO_LOG4J_PROP</span>=<span class="string">'INFO,CONSOLE,ROLLINGFILE'</span></span><br><span class="line">  /tmp/zookeeper/bin/zkServer.sh start-foreground</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  echo <span class="string">"server.<span class="variable">$MYID</span>=<span class="variable">$IPADDRESS</span>:2888:3888;2181"</span> \</span><br><span class="line">      &gt;&gt; /tmp/zookeeper/conf/zoo.cfg.dynamic</span><br><span class="line">  /tmp/zookeeper/bin/zkServer-initialize.sh --force <span class="attribute">--myid</span>=<span class="variable">$MYID</span></span><br><span class="line">  <span class="attribute">ZOO_LOG_DIR</span>=/var/log</span><br><span class="line">  <span class="attribute">ZOO_LOG4J_PROP</span>=<span class="string">'INFO,CONSOLE,ROLLINGFILE'</span></span><br><span class="line">  /tmp/zookeeper/bin/zkServer.sh start-foreground</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<h3 id="2-创建镜像"><a href="#2-创建镜像" class="headerlink" title="2. 创建镜像"></a>2. 创建镜像</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">docker</span> <span class="keyword">build </span>-t peony/zk:<span class="number">2</span> .</span><br></pre></td></tr></table></figure>
<h3 id="3-开启容器"><a href="#3-开启容器" class="headerlink" title="3. 开启容器"></a>3. 开启容器</h3><p>测试脚本<code>start-zk-2.sh</code>，启动三个结点</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f zk01 zk02 zk03</span><br><span class="line">docker run -d --net=net04 --name zk01 --<span class="keyword">add</span>-host \</span><br><span class="line"><span class="symbol">    zk01:</span><span class="number">192.168</span><span class="meta">.4</span><span class="meta">.2</span> --hostname zk01.mudan.com \</span><br><span class="line">    peony/zk:<span class="number">2</span> <span class="number">1</span> <span class="number">192.168</span><span class="meta">.4</span><span class="meta">.2</span></span><br><span class="line">docker run -d --net=net04 --name zk02 --<span class="keyword">add</span>-host \</span><br><span class="line"><span class="symbol">    zk02:</span><span class="number">192.168</span><span class="meta">.4</span><span class="meta">.3</span> --hostname zk02.mudan.com \</span><br><span class="line">    peony/zk:<span class="number">2</span> <span class="number">2</span> <span class="number">192.168</span><span class="meta">.4</span><span class="meta">.3</span> <span class="number">192.168</span><span class="meta">.4</span><span class="meta">.2</span></span><br><span class="line">docker run -d --net=net04 --name zk03 --<span class="keyword">add</span>-host \</span><br><span class="line"><span class="symbol">    zk03:</span><span class="number">192.168</span><span class="meta">.4</span><span class="meta">.4</span> --hostname zk03.mudan.com \</span><br><span class="line">    peony/zk:<span class="number">2</span> <span class="number">3</span> <span class="number">192.168</span><span class="meta">.4</span><span class="meta">.4</span> <span class="number">192.168</span><span class="meta">.4</span><span class="meta">.2</span></span><br></pre></td></tr></table></figure>
<h3 id="4-参考"><a href="#4-参考" class="headerlink" title="4. 参考:"></a>4. 参考:</h3><p><sup><a href="#fn_1" id="reffn_1">1</a></sup>:<a href="http://container-solutions.com/dynamic-zookeeper-cluster-with-docker" target="_blank" rel="noopener">dynamic zookeeper cluster with docker</a></p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>



  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/02/17/2016-02-17-ElasticSearch-Queen-Too-High/">
  <time datetime="2016-02-17T07:51:00.000Z">
    Feb 17 2016
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/02/17/2016-02-17-ElasticSearch-Queen-Too-High/">ElasticSearch search queen size is too high</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>我们有两个ElasticSearch集群用于提供文档索引和搜索服务，其中一个20个结点的大集群用于存储全量数据，一个12个结点的小集群用于存储近一个周数据，ES2即该小集群。</p>
<h3 id="1-问题描述"><a href="#1-问题描述" class="headerlink" title="1 问题描述"></a>1 问题描述</h3><p>ES2-1 CPU负载偏高，search队列积压，集群查询速度过慢。</p>
<h4 id="1-1-CPU负载偏高，search队列积压"><a href="#1-1-CPU负载偏高，search队列积压" class="headerlink" title="1.1 CPU负载偏高，search队列积压"></a>1.1 CPU负载偏高，search队列积压</h4><p>ES2-1</p>
<p><img src="http://ww4.sinaimg.cn/large/6fbc15dcgw1f125pb5c93j20xj0dgdi0.jpg" alt="ES2-1"></p>
<p>ES2-1 search queue size较其他节点偏高。<br><img src="http://ww1.sinaimg.cn/large/6fbc15dcgw1f125rajxd7j20y508q76a.jpg" alt="ES2-1-search"></p>
<p>ES2-2</p>
<p><img src="http://ww4.sinaimg.cn/large/6fbc15dcgw1f125qi2jiij20xd0dfgnr.jpg" alt="ES2-2"></p>
<h4 id="1-2-查询速度"><a href="#1-2-查询速度" class="headerlink" title="1.2 查询速度"></a>1.2 查询速度</h4><p>查询在50s以上</p>
<p><img src="http://ww2.sinaimg.cn/large/6fbc15dcgw1f1252a2hzvj21af0bzk35.jpg" alt="186"></p>
<p><img src="http://ww2.sinaimg.cn/large/6fbc15dcgw1f125oeruk0j21a50bm7gg.jpg" alt="187"></p>
    
  </div>
  <footer class="end-sep">
    
      
        <div class="alignleft">
          <a href="/2016/02/17/2016-02-17-ElasticSearch-Queen-Too-High/#more" class="more-link">Read More</a>
        </div>
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>



  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/01/29/2016-01-29-mysql-truncate-partition/">
  <time datetime="2016-01-29T15:51:00.000Z">
    Jan 29 2016
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/01/29/2016-01-29-mysql-truncate-partition/">mysql清理分区</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>问题描述： mysql集群一个结点(appdb05)磁盘满，需要清理分区数据，同时保留部分客户数据。</p>
<p>解决方法： 先停止写入，再导出数据，再清空分区，再导入数据，确认无误后重新刷新写入。</p>
<p>待观察问题： slaver(appdb12)磁盘满，主从复制可能失效，数据可能不一致。</p>
<h3 id="step-1-关掉相关专题刷新"><a href="#step-1-关掉相关专题刷新" class="headerlink" title="step 1 关掉相关专题刷新"></a>step 1 关掉相关专题刷新</h3><p>@5.23</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql -h <span class="number">192.168</span><span class="number">.5</span><span class="number">.23</span> peony_t -uroot -p</span><br><span class="line">mysql &gt; update pe_t_subject set <span class="section">state</span> = <span class="number">0</span>,\</span><br><span class="line">update_time = now() where id in \</span><br><span class="line">(<span class="number">4620</span>,<span class="number">4849</span>,<span class="number">4850</span>,<span class="number">4852</span>,<span class="number">4853</span>,<span class="number">4854</span>,<span class="number">4855</span>,<span class="number">4858</span>,<span class="number">4859</span>,<span class="number">4860</span>,\</span><br><span class="line"><span class="number">4861</span>,<span class="number">4862</span>,<span class="number">4865</span>,<span class="number">4866</span>,<span class="number">4875</span>,<span class="number">4876</span>,<span class="number">4877</span>,<span class="number">4879</span>,<span class="number">4880</span>,<span class="number">4881</span>,\</span><br><span class="line"><span class="number">4882</span>,<span class="number">4883</span>,<span class="number">4884</span>,<span class="number">4885</span>,<span class="number">4888</span>,<span class="number">5034</span>,<span class="number">5079</span>,<span class="number">5081</span>,<span class="number">5082</span>,<span class="number">5083</span>,\</span><br><span class="line"><span class="number">5101</span>,<span class="number">5102</span>,<span class="number">5103</span>,<span class="number">5104</span>,<span class="number">5162</span>);</span><br><span class="line"></span><br><span class="line">mysql&gt; update pe_t_subject set <span class="section">state</span> = <span class="number">0</span>,\</span><br><span class="line">update_time = now() where id in (<span class="number">3418</span>,<span class="number">3419</span>);</span><br></pre></td></tr></table></figure>
<h3 id="step-2-确保数据没有再写入"><a href="#step-2-确保数据没有再写入" class="headerlink" title="step 2 确保数据没有再写入"></a>step 2 确保数据没有再写入</h3><p>@5.5</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use peony_m_63;</span><br><span class="line">mysql&gt; <span class="keyword">select</span> count<span class="comment">(*) from  pe_t_subject_page where \</span></span><br><span class="line"><span class="comment">userId=1526 AND publishDate&lt;'2016-01-01';</span></span><br><span class="line"><span class="comment">+----------+</span></span><br><span class="line"><span class="comment">| count(*)</span> |</span><br><span class="line">+----------+</span><br><span class="line">|    <span class="number">53226</span> |</span><br><span class="line">+----------+</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.05</span> sec)</span><br><span class="line">[root@i-cphylyv8 ~]# ll -rt /home/mysql3306/peony_m_63</span><br></pre></td></tr></table></figure>
<p><img src="http://ww2.sinaimg.cn/large/6fbc15dcgw1f0jv3sxw05j20q7040n05.jpg" alt=""></p>
    
  </div>
  <footer class="end-sep">
    
      
        <div class="alignleft">
          <a href="/2016/01/29/2016-01-29-mysql-truncate-partition/#more" class="more-link">Read More</a>
        </div>
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>



  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2015/04/05/2015-04-05-ch8-Axes/">
  <time datetime="2015-04-05T13:51:00.000Z">
    Apr 5 2015
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2015/04/05/2015-04-05-ch8-Axes/">Axes</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p><a href="https://github.com/mbostock/d3/wiki/SVG-Axes" target="_blank" rel="noopener">SVG Axes</a></p>
<h4 id="1-Setting-Up-an-Axis"><a href="#1-Setting-Up-an-Axis" class="headerlink" title="1. Setting Up an Axis"></a>1. Setting Up an Axis</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var xAxis = d3.svg.axis()<span class="comment">;</span></span><br><span class="line">xAxis.<span class="keyword">scale(xScale);</span></span><br><span class="line"><span class="keyword">xAxis.orient("bottom");</span></span><br><span class="line"><span class="keyword"># </span>一步到位</span><br><span class="line">var xAxis = d3.svg.axis()</span><br><span class="line">    .<span class="keyword">scale(xScale)</span></span><br><span class="line"><span class="keyword"> </span>   .<span class="keyword">orient("bottom");</span></span><br><span class="line"><span class="keyword"># </span>添加</span><br><span class="line">svg.append(<span class="string">"g"</span>)</span><br><span class="line">    .call(xAxis)<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<h4 id="2-style-SVG-elements"><a href="#2-style-SVG-elements" class="headerlink" title="2. style SVG elements"></a>2. style SVG elements</h4><p><a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute" target="_blank" rel="noopener">SVG Attribute reference</a></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">svg</span><span class="selector-class">.append</span>(<span class="string">"g"</span>)</span><br><span class="line">    <span class="selector-class">.attr</span>(<span class="string">"class"</span>, <span class="string">"axis"</span>) <span class="comment">//Assign "axis" class</span></span><br><span class="line">    <span class="selector-class">.call</span>(xAxis);</span><br></pre></td></tr></table></figure>
<p>CSS</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.axis</span> path,</span><br><span class="line"><span class="selector-class">.axis</span> line &#123;</span><br><span class="line">    fill: none;</span><br><span class="line">    stroke: black;</span><br><span class="line">    shape-rendering: crispEdges;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.axis</span> text &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: sans-serif;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">11px</span>;</span><br><span class="line">&#125;</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">#### 3. <span class="selector-attr">[SVG transformations]</span>(https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/transform)</span><br></pre></td></tr></table></figure>
<h1 id="Note-that-we-use-attr-to-apply-transform-as-an-attribute-of-g"><a href="#Note-that-we-use-attr-to-apply-transform-as-an-attribute-of-g" class="headerlink" title="Note that we use attr() to apply transform as an attribute of g."></a>Note that we use attr() to apply transform as an attribute of g.</h1><p>svg.append(“g”)<br>    .attr(“class”, “axis”)<br>    .attr(“transform”, “translate(0,” + (h - padding) + “)”)<br>    .call(xAxis);<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- more --&gt;</span></span><br><span class="line"></span><br><span class="line">#### 4. Ticks</span><br><span class="line">Ticks communicate information and can also clutter your chart.</span><br></pre></td></tr></table></figure></p>
<p>var xAxis = d3.svg.axis()<br>                  .scale(xScale)<br>                  .orient(“bottom”)<br>                  .ticks(5);  //Set rough # of ticks<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### <span class="number">5.</span> Y axis</span><br></pre></td></tr></table></figure></p>
<p>//Define Y axis<br>var yAxis = d3.svg.axis()<br>                  .scale(yScale)<br>                  .orient(“left”)<br>                  .ticks(5);<br>//Create Y axis<br>svg.append(“g”)<br>    .attr(“class”, “axis”)<br>    .attr(“transform”, “translate(“ + padding + “,0)”)<br>    .call(yAxis);<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section">#### 6. Formatting Tick Labels</span></span><br><span class="line">[<span class="string">d3 formatting</span>](<span class="link">https://github.com/mbostock/d3/wiki/Formatting#d3_format</span>)</span><br></pre></td></tr></table></figure></p>
<p>var formatAsPercentage = d3.format(“.1%”);<br>xAxis.tickFormat(formatAsPercentage);<br>```</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>



  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2015/03/29/2015-03-29-ch7-scales/">
  <time datetime="2015-03-29T14:51:00.000Z">
    Mar 29 2015
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2015/03/29/2015-03-29-ch7-scales/">Scales</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h4 id="1-Scales"><a href="#1-Scales" class="headerlink" title="1. Scales"></a>1. Scales</h4><p>“Scales are functions that map from an input domain to an output range.”</p>
<p>An input domain and an output range, visualized as parallel axes.</p>
<ul>
<li>Normalization</li>
</ul>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var scale = d3.scale.linear()</span><br><span class="line">    .domain([<span class="number">100</span>, <span class="number">500</span>])</span><br><span class="line">    .range([<span class="number">10</span>, <span class="number">350</span>]);</span><br><span class="line">scale(<span class="number">100</span>);  <span class="comment">//Returns 10</span></span><br><span class="line">scale(<span class="number">300</span>);  <span class="comment">//Returns 180</span></span><br><span class="line">scale(<span class="number">500</span>);  <span class="comment">//Returns 350</span></span><br></pre></td></tr></table></figure>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var dataset = [</span><br><span class="line">    [<span class="number">5</span>, <span class="number">20</span>], [<span class="number">480</span>, <span class="number">90</span>], [<span class="number">250</span>, <span class="number">50</span>], [<span class="number">100</span>, <span class="number">33</span>], [<span class="number">330</span>, <span class="number">95</span>],</span><br><span class="line">    [<span class="number">410</span>, <span class="number">12</span>], [<span class="number">475</span>, <span class="number">44</span>], [<span class="number">25</span>, <span class="number">67</span>], [<span class="number">85</span>, <span class="number">21</span>], [<span class="number">220</span>, <span class="number">88</span>]</span><br><span class="line">    ];</span><br><span class="line">d3.max(dataset, function(d) &#123;</span><br><span class="line">    return d[<span class="number">0</span>];</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
    
  </div>
  <footer class="end-sep">
    
      
        <div class="alignleft">
          <a href="/2015/03/29/2015-03-29-ch7-scales/#more" class="more-link">Read More</a>
        </div>
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>



  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2015/03/24/2015-03-24-ch5-6-data-svg/">
  <time datetime="2015-03-24T13:51:00.000Z">
    Mar 24 2015
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2015/03/24/2015-03-24-ch5-6-data-svg/"> Data and SVG</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h4 id="1-project-structure"><a href="#1-project-structure" class="headerlink" title="1. project structure"></a>1. project structure</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">project-folder/</span><br><span class="line">    d3/</span><br><span class="line">        d3<span class="selector-class">.v3</span><span class="selector-class">.js</span></span><br><span class="line">        d3<span class="selector-class">.v3</span><span class="selector-class">.min</span><span class="selector-class">.js</span> (optional)</span><br><span class="line">    index.html</span><br></pre></td></tr></table></figure>
<p>index.html</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>D3 Page Template<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"d3/d3.v3.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">            <span class="comment">// Your beautiful D3 code will go here</span></span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="2-Setting-Up-a-Web-Server"><a href="#2-Setting-Up-a-Web-Server" class="headerlink" title="2. Setting Up a Web Server"></a>2. Setting Up a Web Server</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> project-folder</span><br><span class="line"><span class="keyword">python</span> -<span class="keyword">m</span> SimpleHTTPServer <span class="number">8888</span> &amp;</span><br></pre></td></tr></table></figure>
<p>Then,  <a href="http://localhost:8888" target="_blank" rel="noopener">http://localhost:8888</a></p>
<h4 id="3-data"><a href="#3-data" class="headerlink" title="3. data"></a>3. data</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>D3 Page Template<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"../d3/d3.v3.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">            <span class="comment">// Your beautiful D3 code will go here</span></span></span><br><span class="line"><span class="actionscript">            d3.select(<span class="string">"body"</span>).append(<span class="string">"p"</span>).text(<span class="string">"New paragraph!"</span>);</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="4-bind-data"><a href="#4-bind-data" class="headerlink" title="4. bind data"></a>4. bind data</h4><ul>
<li>The data</li>
<li>A selection of DOM elements</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># define</span></span><br><span class="line"><span class="keyword">var</span> dataset = [ <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">20</span>, <span class="number">25</span> ];</span><br><span class="line"><span class="comment"># from file</span></span><br><span class="line">d3.csv(<span class="string">"food.csv"</span>, <span class="function"><span class="keyword">function</span><span class="params">(data)</span> </span>&#123;</span><br><span class="line">    console.log(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
    
  </div>
  <footer class="end-sep">
    
      
        <div class="alignleft">
          <a href="/2015/03/24/2015-03-24-ch5-6-data-svg/#more" class="more-link">Read More</a>
        </div>
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>



  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2015/03/21/2015-03-21-ch3-Technology-Fundamentals/">
  <time datetime="2015-03-21T03:51:00.000Z">
    Mar 21 2015
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2015/03/21/2015-03-21-ch3-Technology-Fundamentals/">Technology Fundamentals</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h4 id="1-Common-Elements"><a href="#1-Common-Elements" class="headerlink" title="1.Common Elements"></a><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element" target="_blank" rel="noopener">1.Common Elements</a></h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">html</span><br><span class="line">head</span><br><span class="line">title</span><br><span class="line">body</span><br><span class="line"><span class="selector-tag">ul</span>, <span class="selector-tag">ol</span>, li</span><br><span class="line">em/strong</span><br><span class="line">a</span><br><span class="line">span</span><br><span class="line">div</span><br></pre></td></tr></table></figure>
<h4 id="2-Attributes"><a href="#2-Attributes" class="headerlink" title="2. Attributes"></a>2. Attributes</h4><p>All HTML elements can be assigned attributes by including property/value pairs in the opening tag.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tagname</span> <span class="attr">property</span>=<span class="string">"value"</span>&gt;</span><span class="tag">&lt;/<span class="name">tagname</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Different kinds of elements can be assigned different attributes.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://d3js.org/"</span>&gt;</span>The D3 website<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
    
  </div>
  <footer class="end-sep">
    
      
        <div class="alignleft">
          <a href="/2015/03/21/2015-03-21-ch3-Technology-Fundamentals/#more" class="more-link">Read More</a>
        </div>
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>



  

  <nav id="pagination">
  
  
    <a href="/page/2/" class="next">Next</a>
  
  <div class="clearfix"></div>
</nav>

</div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2018 <a href="/">Buttonwood</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   | 
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
  var duoshuoQuery = { short_name: 'buttonwood' };
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';
    ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<!--<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>--><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>