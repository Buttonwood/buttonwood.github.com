<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title> Data and SVG | Buttonwood</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
    <meta name="author" content="Buttonwood">
  
  
    <meta name="description" content="1. project structure12345project-folder/    d3/        d3.v3.js        d3.v3.min.js (optional)    index.html
index.html
12345678910111213&amp;lt;!DOCTYPE html&amp;gt;&amp;lt;html lang=&amp;quot;en&amp;quot;&amp;gt;    &amp;lt;he">
  
  <meta name="description" content="1. project structure12345project-folder/    d3/        d3.v3.js        d3.v3.min.js (optional)    index.html index.html 12345678910111213&amp;lt;!DOCTYPE html&amp;gt;&amp;lt;html lang=&amp;quot;en&amp;quot;&amp;gt;    &amp;lt;he">
<meta name="keywords" content="D3.js">
<meta property="og:type" content="article">
<meta property="og:title" content=" Data and SVG">
<meta property="og:url" content="http://buttonwood.github.io/2015/03/24/2015-03-24-ch5-6-data-svg/index.html">
<meta property="og:site_name" content="Buttonwood">
<meta property="og:description" content="1. project structure12345project-folder/    d3/        d3.v3.js        d3.v3.min.js (optional)    index.html index.html 12345678910111213&amp;lt;!DOCTYPE html&amp;gt;&amp;lt;html lang=&amp;quot;en&amp;quot;&amp;gt;    &amp;lt;he">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-07-03T02:32:55.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content=" Data and SVG">
<meta name="twitter:description" content="1. project structure12345project-folder/    d3/        d3.v3.js        d3.v3.min.js (optional)    index.html index.html 12345678910111213&amp;lt;!DOCTYPE html&amp;gt;&amp;lt;html lang=&amp;quot;en&amp;quot;&amp;gt;    &amp;lt;he">
  
    <link rel="alternate" href="/atom.xml" title="Buttonwood" type="application/atom+xml">
  
  
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>

<body>
  <div class="wrapper">
    <header id="header">
  <div class="title">
    <h1><a href="/">Buttonwood</a></h1>
    <p><a href="/">Being A Coding Poet. Less Talk, and More Move!</a></p>
  </div>
  <nav class="nav">
    <ul>
      
        <li><a href="/about/">About</a></li>
      
        <li><a href="/archives/">Archives</a></li>
      
        <li><a href="/links/">Links</a></li>
      
      
        <li><a href="/atom.xml">RSS</a></li>
      
    </ul>
    <div class="clearfix"></div>
  </nav>
  <div class="clearfix"></div>
</header>
    <div class="content"><article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2015/03/24/2015-03-24-ch5-6-data-svg/">
  <time datetime="2015-03-24T13:51:00.000Z">
    Mar 24 2015
  </time>
</a>
    
    
  
    <h1 class="title"> Data and SVG</h1>
  

  </header>
  
  <div class="entry">
    
      <h4 id="1-project-structure"><a href="#1-project-structure" class="headerlink" title="1. project structure"></a>1. project structure</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">project-folder/</span><br><span class="line">    d3/</span><br><span class="line">        d3.v3.js</span><br><span class="line">        d3.v3.min.js (optional)</span><br><span class="line">    index.html</span><br></pre></td></tr></table></figure>
<p>index.html</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">        &lt;title&gt;D3 Page Template&lt;/title&gt;</span><br><span class="line">        &lt;script type=&quot;text/javascript&quot; src=&quot;d3/d3.v3.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">            // Your beautiful D3 code will go here</span><br><span class="line">        &lt;/script&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="2-Setting-Up-a-Web-Server"><a href="#2-Setting-Up-a-Web-Server" class="headerlink" title="2. Setting Up a Web Server"></a>2. Setting Up a Web Server</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd project-folder</span><br><span class="line">python -m SimpleHTTPServer 8888 &amp;</span><br></pre></td></tr></table></figure>
<p>Then,  <a href="http://localhost:8888" target="_blank" rel="noopener">http://localhost:8888</a></p>
<h4 id="3-data"><a href="#3-data" class="headerlink" title="3. data"></a>3. data</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">        &lt;title&gt;D3 Page Template&lt;/title&gt;</span><br><span class="line">        &lt;script type=&quot;text/javascript&quot; src=&quot;../d3/d3.v3.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">            // Your beautiful D3 code will go here</span><br><span class="line">            d3.select(&quot;body&quot;).append(&quot;p&quot;).text(&quot;New paragraph!&quot;);</span><br><span class="line">        &lt;/script&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="4-bind-data"><a href="#4-bind-data" class="headerlink" title="4. bind data"></a>4. bind data</h4><ul>
<li>The data</li>
<li>A selection of DOM elements</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># define</span><br><span class="line">var dataset = [ 5, 10, 15, 20, 25 ];</span><br><span class="line"># from file</span><br><span class="line">d3.csv(&quot;food.csv&quot;, function(data) &#123;</span><br><span class="line">    console.log(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>Handling Data Loading Errors.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var dataset; //Global variable</span><br><span class="line">d3.csv(&quot;food.csv&quot;, function(error, data) &#123;</span><br><span class="line">        //If error is not null, something went wrong.</span><br><span class="line">        if (error) &#123;           </span><br><span class="line">            console.log(error);  //Log the error.</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            //If no error, the file loaded correctly. Yay!</span><br><span class="line">            console.log(data);   //Log the data.</span><br><span class="line">            //Include other code to execute after successful file load here</span><br><span class="line">            dataset = data;</span><br><span class="line">            generateVis();</span><br><span class="line">            hideLoadingMsg();</span><br><span class="line">        &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>d3.tsv()</li>
<li>d3.json() </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">var dataset = [ 5, 10, 15, 20, 25 ];</span><br><span class="line"># </span><br><span class="line">d3.select(&quot;body&quot;).selectAll(&quot;p&quot;)</span><br><span class="line">    .data(dataset)</span><br><span class="line">    .enter()</span><br><span class="line">    .append(&quot;p&quot;)</span><br><span class="line">    .text(&quot;New paragraph!&quot;);</span><br><span class="line">#</span><br><span class="line">d3.select(&quot;body&quot;).selectAll(&quot;p&quot;)</span><br><span class="line">    .data(dataset)</span><br><span class="line">    .enter()</span><br><span class="line">    .append(&quot;p&quot;)</span><br><span class="line">    .text(function(d) &#123; return d; &#125;);</span><br><span class="line">#</span><br><span class="line">d3.select(&quot;body&quot;).selectAll(&quot;p&quot;)</span><br><span class="line">    .data(dataset)</span><br><span class="line">    .enter()</span><br><span class="line">    .append(&quot;p&quot;)</span><br><span class="line">    .text(function(d) &#123; return d; &#125;)</span><br><span class="line">    .style(&quot;color&quot;, function(d) &#123;</span><br><span class="line">        if (d &gt; 15) &#123;   //Threshold of 15</span><br><span class="line">            return &quot;red&quot;;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return &quot;black&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">     &#125;);</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">#### 5. Drawing divs</span><br><span class="line">* selection.attr()        </span><br><span class="line">    add a class to an element</span><br><span class="line"></span><br><span class="line">* style(). attr()         </span><br><span class="line">    sets DOM attribute values, whereas style() applies CSS styles directly to an element.</span><br></pre></td></tr></table></figure>
<h1 id="css"><a href="#css" class="headerlink" title="css"></a>css</h1><p>div.bar {<br>    display: inline-block;<br>    width: 20px;<br>    height: 75px;   /<em> We’ll override height later </em>/<br>    background-color: teal;<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">html 布局</span><br></pre></td></tr></table></figure></p>
<pre><code># html
&lt;div class=&quot;bar&quot;&gt;&lt;/div&gt;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="js"><a href="#js" class="headerlink" title="js"></a>js</h1><p>.attr(“class”, “bar”)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">An element’s class is stored as an HTML attribute. The class, in turn, is used to reference a CSS style rule.</span><br></pre></td></tr></table></figure></p>
<pre><code>.classed(&quot;bar&quot;, true)        
# or        
.classed(&quot;bar&quot;, false)        
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>&lt;!DOCTYPE html&gt;</p>
<p><html lang="en"><br>    <head><br>        <meta charset="utf-8"><br>        <title>D3: Drawing divs, spaced out</title><br>        <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script><br>        <style type="text/css"><br>            div.bar {<br>                display: inline-block;<br>                width: 20px;<br>                height: 75px;    /<em> Gets overriden by D3-assigned height below </em>/<br>                margin-right: 2px;<br>                background-color: teal;<br>            }<br>        </style><br>    </head><br>    <body><br>        <script type="text/javascript"><br>            var dataset = [ 25, 7, 5, 26, 11, 8, 25, 14, 23, 19, 14, 11, 22, 29, 11, 13, 12, 17, 18, 10, 24, 18, 25, 9, 3 ];<br>            d3.select(“body”).selectAll(“div”)<br>                .data(dataset)<br>                .enter()<br>                .append(“div”)<br>                .attr(“class”, “bar”)<br>                .style(“height”, function(d) {<br>                    var barHeight = d * 5;<br>                    return barHeight + “px”;<br>                });<br>        </script><br>    </body><br></html><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 6. SVG</span><br></pre></td></tr></table></figure></p>
<p>// Width and height<br>var w = 500;<br>var h = 50;<br>// svg<br>var svg = d3.select(“body”)<br>            .append(“svg”)<br>            .attr(“width”, w)   // &lt;– Here<br>            .attr(“height”, h); // &lt;– and here!<br>// dataset<br>var dataset = [ 5, 10, 15, 20, 25 ];<br>// shape -&gt; circles<br>var circles = svg.selectAll(“circle”)<br>                 .data(dataset)<br>                 .enter()<br>                 .append(“circle”);<br>// attr<br>circles.attr(“cx”, function(d, i) {<br>            return (i * 50) + 25;<br>        })<br>       .attr(“cy”, h/2)<br>       .attr(“r”, function(d) {<br>            return d;<br>       });<br>// colors<br>circles.attr(“fill”, “yellow”)<br>    .attr(“stroke”, “orange”)<br>    .attr(“stroke-width”, function(d) {<br>        return d/2;<br>    });<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>&lt;!DOCTYPE html&gt;</p>
<p><html lang="en"><br>    <head><br>        <meta charset="utf-8"><br>        <title>D3: A true bar chart with SVG rects</title><br>      <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script><br>        <style type="text/css"><br>            /<em> No style rules here yet </em>/<br>        </style><br>    </head><br>    <body><br>        <script type="text/javascript"><br>            //Width and height<br>            var w = 500;<br>            var h = 100;<br>            var barPadding = 1;<br>            var dataset = [ 5, 10, 13, 19, 21, 25, 22, 18, 15, 13,11, 12, 15, 20, 18, 17, 16, 18, 23, 25 ];</p>
<pre><code>        //Create SVG element
        var svg = d3.select(&quot;body&quot;)
                    .append(&quot;svg&quot;)
                    .attr(&quot;width&quot;, w)
                    .attr(&quot;height&quot;, h);

        svg.selectAll(&quot;rect&quot;)
           .data(dataset)
           .enter()
           .append(&quot;rect&quot;)
           .attr(&quot;x&quot;, function(d, i) {
                   return i * (w / dataset.length);
           })
           .attr(&quot;y&quot;, function(d) {
                   return h - (d * 4);
           })
           .attr(&quot;width&quot;, w / dataset.length - barPadding)
           .attr(&quot;height&quot;, function(d) {
                   return d * 4;
           });    
    &lt;/script&gt;
&lt;/body&gt;
</code></pre><p></html><br><code>`</code></p>
</script></body></html></p>
    
  </div>
  <footer>
    
      
  <div class="categories">
    <a class="categories-link" href="/categories/D3-js/">D3.js</a>
  </div>

      
  <div class="tags">
    <a class="tags-link" href="/tags/D3-js/">D3.js</a>
  </div>

    
    <div class="clearfix"></div>
  </footer>
</article>


<section id="comment"> 
    <h1 class="title">Comments</h1>
    <div class="ds-thread" data-title=" Data and SVG"></div> 
</section>

</div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2018 <a href="/">Buttonwood</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   | 
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
  var duoshuoQuery = { short_name: 'buttonwood' };
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';
    ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

</body>
</html>